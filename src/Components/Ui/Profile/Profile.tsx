import { type WalletDto } from '@/entities/user'

type TProps = {
  wallet: WalletDto
  isVisible: boolean
  setVisible: (o: any) => void
  content?: () => JSX.Element
  popupButtons?: () => JSX.Element
}

export function Profile({ wallet, isVisible, setVisible, popupButtons, content }: TProps) {
  return (
    <>
      <div className={'profile'} onClick={() => setVisible(!isVisible)}>
        <div className={'profile__balance'}>
          <p>
            {wallet?.value && wallet.value.toFixed(0)} {wallet?.currency || ''}
          </p>
        </div>
        <div className={'profile__avatar'}>
          <svg width="42" height="42" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="42" height="42" rx="8" fill="#242731" />
            <path
              d="M14.0781 23.4805L16.2227 23.293C16.3242 24.1523 16.5586 24.8594 16.9258 25.4141C17.3008 25.9609 17.8789 26.4062 18.6602 26.75C19.4414 27.0859 20.3203 27.2539 21.2969 27.2539C22.1641 27.2539 22.9297 27.125 23.5938 26.8672C24.2578 26.6094 24.75 26.2578 25.0703 25.8125C25.3984 25.3594 25.5625 24.8672 25.5625 24.3359C25.5625 23.7969 25.4062 23.3281 25.0938 22.9297C24.7812 22.5234 24.2656 22.1836 23.5469 21.9102C23.0859 21.7305 22.0664 21.4531 20.4883 21.0781C18.9102 20.6953 17.8047 20.3359 17.1719 20C16.3516 19.5703 15.7383 19.0391 15.332 18.4062C14.9336 17.7656 14.7344 17.0508 14.7344 16.2617C14.7344 15.3945 14.9805 14.5859 15.4727 13.8359C15.9648 13.0781 16.6836 12.5039 17.6289 12.1133C18.5742 11.7227 19.625 11.5273 20.7812 11.5273C22.0547 11.5273 23.1758 11.7344 24.1445 12.1484C25.1211 12.5547 25.8711 13.1562 26.3945 13.9531C26.918 14.75 27.1992 15.6523 27.2383 16.6602L25.0586 16.8242C24.9414 15.7383 24.543 14.918 23.8633 14.3633C23.1914 13.8086 22.1953 13.5312 20.875 13.5312C19.5 13.5312 18.4961 13.7852 17.8633 14.293C17.2383 14.793 16.9258 15.3984 16.9258 16.1094C16.9258 16.7266 17.1484 17.2344 17.5938 17.6328C18.0312 18.0312 19.1719 18.4414 21.0156 18.8633C22.8672 19.2773 24.1367 19.6406 24.8242 19.9531C25.8242 20.4141 26.5625 21 27.0391 21.7109C27.5156 22.4141 27.7539 23.2266 27.7539 24.1484C27.7539 25.0625 27.4922 25.9258 26.9688 26.7383C26.4453 27.543 25.6914 28.1719 24.707 28.625C23.7305 29.0703 22.6289 29.293 21.4023 29.293C19.8477 29.293 18.543 29.0664 17.4883 28.6133C16.4414 28.1602 15.6172 27.4805 15.0156 26.5742C14.4219 25.6602 14.1094 24.6289 14.0781 23.4805Z"
              fill="white"
            />
          </svg>
        </div>

        {isVisible && (
          <div className={'profile__popup'}>
            <div className={'profile__popup-buttons'}>{popupButtons?.()}</div>
            {content?.()}
          </div>
        )}
      </div>
    </>
  )
}
